const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D7wmmFjk.js","assets/index-CYA54aLl.js","assets/sweetalert2-B0Dix5B2.js","assets/axios-D8rVyQy1.js","assets/jquery-Cbw-UD5s.js","assets/jszip-iaRLBgVt.js","assets/pdfmake-DIF5dMoL.js","assets/lodash-DeFuYRHF.js","assets/dropzone-y6Y7QKyv.js","assets/just-extend-DZ8Smc-h.js","assets/datatables.net-B-RIlqBn.js","assets/datatables.net-buttons-BGn0gpHj.js","assets/datatables.net-responsive-DZCnhbGj.js","assets/lucide-_Yz-U2iH.js","assets/alpinejs-Cm4okMZt.js","assets/apexcharts-DfcQ-EiH.js"])))=>i.map(i=>d[i]);
import{$ as h}from"./jquery-Cbw-UD5s.js";import{a as y}from"./axios-D8rVyQy1.js";import{J as D}from"./jszip-iaRLBgVt.js";import{v as O,p as A}from"./pdfmake-DIF5dMoL.js";import{_ as C}from"./lodash-DeFuYRHF.js";import{$ as L}from"./dropzone-y6Y7QKyv.js";import{S as p}from"./sweetalert2-B0Dix5B2.js";import"./datatables.net-B-RIlqBn.js";import"./datatables.net-buttons-BGn0gpHj.js";import"./datatables.net-responsive-DZCnhbGj.js";import{c as g,i as _}from"./lucide-_Yz-U2iH.js";import{a as f,s as I,h as j}from"./index-CYA54aLl.js";import{m as b}from"./alpinejs-Cm4okMZt.js";import{u as k}from"./apexcharts-DfcQ-EiH.js";import"./just-extend-DZ8Smc-h.js";const R="modulepreload",M=function(t){return"/"+t},w={},l=function(e,o,a){let s=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),i=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));s=Promise.allSettled(o.map(n=>{if(n=M(n),n in w)return;w[n]=!0;const u=n.endsWith(".css"),m=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${m}`))return;const c=document.createElement("link");if(c.rel=u?"stylesheet":R,u||(c.as="script"),c.crossOrigin="",c.href=n,i&&c.setAttribute("nonce",i),document.head.appendChild(c),u)return new Promise((E,P)=>{c.addEventListener("load",E),c.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${n}`)))})}))}function d(r){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=r,window.dispatchEvent(i),!i.defaultPrevented)throw r}return s.then(r=>{for(const i of r||[])i.status==="rejected"&&d(i.reason);return e().catch(d)})};function x(t){t.response&&t.response.data&&t.response.data.message?p.fire("Error",t.response.data.message,"error"):t.message?p.fire("Error",t.message,"error"):p.fire("Error","Ocurrió un error inesperado.","error")}function v(t,e,o,a,s){y({url:t,method:e,data:o,headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(a).catch(s)}function T(t){if(!t)return"";const e=new Date(t),o=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0"),d=String(e.getHours()).padStart(2,"0"),r=String(e.getMinutes()).padStart(2,"0"),i=String(e.getSeconds()).padStart(2,"0");return`${o}-${a}-${s}T${d}:${r}:${i}`}function V(t){if(!t)return"";const e=new Date(t),o=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0"),d=e.getHours(),r=e.getMinutes();return`${s}-${a}-${o} ${d}:${r}`}function F(t="A"){const e=document.querySelector('input[name="estado"]'),o=document.querySelector('input[name="estado-texto"]');e.value=t,t==="A"||t===""?o.value="ACTIVO":t==="I"?o.value="INACTIVO":t==="E"?o.value="ELIMINADO":o.value=""}g({icons:_});const N="/images/icons/crud/iconos_agregar.svg";class U{constructor(e){this.config=e,this.table=null,this.baseUrl=e.baseUrl,this.state={id:"",method:"POST"},this.formatearFechaSinSegundos=V,this.config.columns=this.config.columns.map(o=>{typeof o.render=="string"&&typeof this[o.render]=="function"&&(o.render=this[o.render].bind(this));const a=o.createdCell;return o.createdCell=function(s,d,r,i,n){$(s).removeClass("dt-type-numeric dt-type-date dt-body-right"),o.className&&$(s).addClass(o.className),typeof a=="function"&&a(s,d,r,i,n)},o})}initDataTable(){const e=`#${this.config.moduleTable}`;$.fn.DataTable.isDataTable(e)&&($(e).DataTable().clear().destroy(),$(`${e} thead`).remove(),$(e).empty());const o=this.config.columns||[{data:"producto_id",name:"producto_id",title:"ID"},{data:"nombre",name:"nombre",title:"Nombre"},{data:"unidad_medida",name:"unidad_medida",title:"Unidad Medida"},{data:"precio_unitario",name:"precio_unitario",title:"Precio Unitario"},{data:"estado",name:"estado",title:"Estado",render:"renderEstado",orderable:!1,searchable:!1},{data:"action",name:"action",title:"Acciones",orderable:!1,searchable:!1}],a=this.config.buttons||[{extend:"copy",text:"COPIAR",titleAttr:"Copiar en portapapeles",className:"art-btn-secondary text-xs"},{extend:"excelHtml5",text:"EXCEL",titleAttr:"Exportar a Excel",className:"art-btn-secondary text-xs"},{extend:"pdfHtml5",text:"PDF",titleAttr:"Exportar a PDF",className:"art-btn-secondary text-xs"},{extend:"colvis",text:"Columnas",titleAttr:"Mostrar/Ocultar Columnas",className:"art-btn-secondary text-xs relative",columnText:function(s,d,r){return`<label class="flex items-center gap-2 m-0 p-0 cursor-pointer">
                              <input type="checkbox" class="form-checkbox pointer-events-none h-4 w-4 text-blue-600" ${s.column(d).visible()?"checked":""} />
                              <span>${r}</span>
                            </label>`}},{text:`
                    <span class="flex items-center gap-2">
                        <img src="${N}" alt="Agregar" class="w-4 h-4" />
                        <span>Agregar</span>
                    </span>
                `,titleAttr:"Agregar",className:"px-4 py-2_5 border border-primary rounded-md text-primary font-semibold text-xs transition-all duration-300 hover:bg-primary hover:text-white",action:()=>{this.state={id:"",method:"POST"};const s=document.getElementById(this.config.moduleForm);s&&s.reset(),window.Helpers.showModal(this.config.moduleModal)}}];this.table=$(e).DataTable({processing:!0,serverSide:!0,responsive:!0,scrollCollapse:!0,scrollY:"75vh",scrollX:"75vw",ajax:{url:this.baseUrl,type:"GET",async:!0},columns:o,language:{url:"/lang/datatables/es-ES.json"},lengthMenu:[[10,20,50,-1],[10,20,50,"Todos"]],oLanguage:{oPaginate:{sFirst:'<i data-lucide="chevrons-left" class="w-4 h-4"></i>',sPrevious:'<i data-lucide="chevron-left" class="w-4 h-4"></i>',sNext:'<i data-lucide="chevron-right" class="w-4 h-4"></i>',sLast:'<i data-lucide="chevrons-right" class="w-4 h-4"></i>'}},dom:`
            <"sm:flex sm:items-center sm:justify-between mb-4"
                <"flex flex-col gap-2"
                    <"flex items-center gap-4"B>
                    <"flex items-center mt-5 gap-4"l>
                >
                <"flex items-center justify-end"f>
            >
            <"overflow-x-auto"rt>
            <"sm:flex sm:items-center sm:justify-between mt-4"
                <"text-sm text-gray-700"i>
                <"flex items-center justify-end"p>
            >
        `,buttons:a,headerCallback:(s,d,r,i,n)=>{$(s).find("th").each((u,m)=>{const c=this.config.columns[u],E=c&&c.headerClass&&c.headerClass.trim()!==""?c.headerClass:"text-left";$(m).addClass(E)})},initComplete:function(){g({icons:_})},drawCallback:()=>{g({icons:_})}}),$(e).on("click",".eliminar",s=>{s.preventDefault();const d=$(s.currentTarget).data("url"),r=$(s.currentTarget).data("confirm")||"¿Estás seguro?";f("confirm",r,"Esta acción no se puede deshacer",{confirmText:"Sí, eliminar",cancelText:"Cancelar",useAnimatedIcon:!1}).then(i=>{i.isConfirmed&&v(d,"DELETE",null,n=>{this.table.ajax.reload(),f("success","Éxito",n.data.message)},x)})})}renderEstado(e,o,a){if(o==="display"){const s=a.estado==="A",d=a.estado==="E";return`
            <label class="relative inline-flex items-center cursor-pointer">
              <input
                type="checkbox"
                ${s?"checked":""}
                ${d?"disabled":""}
                class="sr-only"
              >
              <div class="w-11 h-6 ${s?"art-bg-secondary":"bg-gray-200"}
                   rounded-full transition-colors duration-200 ${d?"opacity-50 cursor-not-allowed":""}">
                <div class="absolute left-1 top-1 w-4 h-4 bg-white rounded-full
                     transition-transform duration-200 transform ${s?"translate-x-5":""}">
                </div>
              </div>
            </label>
          `}return e}initForm(){const{moduleForm:e,moduleTable:o,formFields:a,baseUrl:s}=this.config;$(`#${o}`).on("click",".editar",d=>{d.preventDefault();const r=$(d.currentTarget).data("url");v(r,"GET",null,i=>{const{data:n}=i;this.state.id=n[this.config.idField||"producto_id"],this.state.method="PUT",$(`#${e}`).attr({"data-id":this.state.id,"data-type":"PUT",method:"PUT",action:s+this.state.id}),setTimeout(()=>{this.config.formFields.forEach(m=>{let c=n[m];$(`#${m}`).val(c),$(`#${m}`).is("select")&&$(`#${m}`).val(c).trigger("change")}),$("#nombre").val(n.nombre),F(n.estado),$("#fecha_registro").val(T(n.fecha_registro)),$("#fecha_actualizacion").val(T(n.fecha_actualizacion)),this.state.method==="PUT"?($(".password-fields").hide(),$("#btn-cambiar-password").show(),$("#btn-cambiar-password").off("click").on("click",function(){$(".password-fields").show(),$("#password, #password_confirmation").attr("required",!0),$(this).hide()})):($(".password-fields").show(),$("#password, #password_confirmation").attr("required",!0),$("#btn-cambiar-password").hide()),window.Helpers.showModal(this.config.moduleModal)},100)},x)}),$(`#${e}`).on("submit",d=>{d.preventDefault();const r=document.getElementById(e),i=new FormData(r),n=this.state.method==="PUT"?`${s}${this.state.id}`:s;i.append(this.config.idField||"producto_id",this.state.id),i.append("_method",this.state.method),v(n,"POST",i,u=>{this.state={id:"",method:"POST"},window.Helpers.hideModal(this.config.moduleModal),this.table&&this.table.ajax.reload(),r.reset(),f("success","Éxito",u.data.message)},x)})}init(){this.initDataTable(),this.initForm()}}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".logoutButton").forEach(e=>{e.addEventListener("click",function(o){o.preventDefault(),f("confirm","¿Estás seguro de que deseas cerrar sesión?").then(a=>{a.isConfirmed&&q()})})})});function q(){if(!localStorage.getItem("token")){f("error","No hay sesión activa."),window.location.href="/login";return}I("/api/auth/logout","POST",{},e=>{e.resultado?(localStorage.removeItem("token"),document.cookie="token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 UTC; SameSite=Lax",f("success","Sesión cerrada correctamente").then(()=>{window.location.href="/login"})):f("error",e.message||"No se pudo cerrar sesión.")},e=>{j(e)})}document.addEventListener("alpine:init",()=>{Alpine.data("combinedAccess",()=>({sidebarOpen:!0,roles:JSON.parse(localStorage.getItem("roles")||"[]"),permissions:JSON.parse(localStorage.getItem("permissions")||"[]"),hasRole(t){return this.roles.includes(t)},hasAnyRole(...t){return t.some(e=>this.roles.includes(e))},hasPermission(t){return this.permissions.includes(t)},hasAnyPermission(...t){return t.some(e=>this.permissions.includes(e))}}))});window.$=h;window.jQuery=h;window.axios=y;window.JSZip=D;A.vfs=O.vfs;window.pdfMake=A;window._=C;window.Dropzone=L;window.Swal=p;g({icons:_});window.BaseModule=U;const S=Object.assign({"./modules/Autenticacion/index.js":()=>l(()=>import("./index-D7wmmFjk.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),"./modules/Colonias/index.js":()=>l(()=>import("./index-BrN_pFLj.js"),[]),"./modules/Empleados/index.js":()=>l(()=>import("./index-Cu4YXykY.js"),[]),"./modules/EstadosGenerales/index.js":()=>l(()=>import("./index-CbuSFiTH.js"),[]),"./modules/EstadosPaises/index.js":()=>l(()=>import("./index-CuHAjCyv.js"),[]),"./modules/Home/index.js":()=>l(()=>import("./index-CYA54aLl.js").then(t=>t.i),__vite__mapDeps([1,2,3])),"./modules/Municipios/index.js":()=>l(()=>import("./index-_64N0RDE.js"),[]),"./modules/Paises/index.js":()=>l(()=>import("./index-CEarZSGP.js"),[]),"./modules/Permisos/index.js":()=>l(()=>import("./index-C6bxDAcF.js"),[]),"./modules/Personas/index.js":()=>l(()=>import("./index-Jd-vVtPa.js"),[]),"./modules/PlazosCreditos/index.js":()=>l(()=>import("./index-C2XlwlzI.js"),[]),"./modules/Productos/index.js":()=>l(()=>import("./index-Zm9x9PM9.js"),[]),"./modules/Proveedores/index.js":()=>l(()=>import("./index-BFac0SFz.js"),[]),"./modules/ProveedoresContactos/index.js":()=>l(()=>import("./index-BumX8mgU.js"),[]),"./modules/Roles/index.js":()=>l(()=>import("./index-DHRZ3SXy.js"),[]),"./modules/Servicios/index.js":()=>l(()=>import("./index-D88Wmd71.js"),[]),"./modules/TiposGastos/index.js":()=>l(()=>import("./index-D6jdE4uV.js"),[]),"./modules/TiposSolicitudes/index.js":()=>l(()=>import("./index-CsZ8CVcC.js"),[]),"./modules/UnidadesMedidas/index.js":()=>l(()=>import("./index-CJYnAPHS.js"),[]),"./modules/Usuarios/index.js":()=>l(()=>import("./index-Mob48vGx.js"),[])});document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector("[data-module]"),e=t?t.getAttribute("data-module"):null;if(e){const o=Object.keys(S).find(a=>a.toLowerCase().includes(`/${e.toLowerCase()}/`));o?S[o]().then(a=>{typeof a.init=="function"&&a.init()}).catch(a=>{console.error("Error al cargar el módulo:",e,a)}):console.warn(`No se encontró ningún módulo que coincida con: ${e}`)}});h.ajaxSetup({headers:{"X-CSRF-TOKEN":h('meta[name="csrf-token"]').attr("content")}});document.addEventListener("DOMContentLoaded",()=>{const t=localStorage.getItem("theme")||"light";document.documentElement.classList.toggle("dark",t==="dark"),document.querySelectorAll("[data-hs-theme-click-value]").forEach(e=>{e.addEventListener("click",o=>{const a=o.currentTarget.getAttribute("data-hs-theme-click-value");localStorage.setItem("theme",a),document.documentElement.classList.toggle("dark",a==="dark")})})});window.Alpine=b;document.addEventListener("alpine:init",()=>{b.data("layout",()=>({sidebarOpen:!0,cotizacionesOpen:!1,configuracionOpen:!1,sistemaOpen:!1}))});b.start();window.ApexCharts=k;
